(Please see Corrections & Amplifications item below.)

TUCSON, Ariz.—Accused gunman Jared Lee Loughner appeared to have been long obsessed with U.S. Rep. Gabrielle Giffords. 

A safe at Mr. Loughner's home contained a form letter from Ms. Giffords' office thanking him for attending a 2007 "Congress on your Corner'' event in Tucson. The safe also held an envelope with handwritten notes, including the name of Ms. Giffords, as well as "I planned ahead," "My assassination," and what appeared to be Mr. Loughner's signature, according to an FBI affidavit. 

Federal authorities charged Mr. Loughner on Sunday with two counts of murder, two counts of attempted murder and a count of attempting to kill a member of Congress, during a scheduled public appearance by Ms. Giffords here Saturday. More charges are expected, officials said, and Mr. Loughner, age 22, remains in federal custody. He will appear in federal court in Phoenix on Monday afternoon.

Mr. Loughner had complained to a friend about how he was treated by the Arizona lawmaker during an event several years ago, which aggravated Mr. Loughner, according to the friend.

Authorities allege Mr. Loughner's anger exploded on Saturday. Shortly after 10 a.m., as U.S. District Court Judge John Roll greeted Ms. Giffords in front of a Safeway supermarket, authorities charged Mr. Loughner fired a Glock 9mm semiautomatic pistol into the back of her head. In the seconds that followed, say authorities, Mr. Loughner shot 18 others, six fatally, including the judge and a 9-year-old girl, before his gun jammed and he was wrestled to the ground.

Hospital officials said Sunday that Ms. Giffords had responded well to brain surgery, though she is still in critical condition. Four other patients who suffered critical wounds were moved out of intensive care. 

Federal investigators are still gathering evidence to determine what prompted Mr. Loughner to carry out the attack. Investigators suspect Mr. Loughner acted alone, giving few signs of any violent intent.

Interviews with people who knew Mr. Loughner suggest the shooting followed a slow unraveling in the life of a seemingly peaceful young man. 

Mr. Loughner was a scrawny, average teenager with a mop of curly hair. He played saxophone at football games and jammed with a friend's garage band. In his freshman and sophomore years at Mountain View High School, Mr. Loughner flew under the radar. 

"All he did was play video games and play music," said Tommy Marriotti, a high school friend. Mr. Marriotti said much of Mr. Loughner's free time was devoted to the school band. He wasn't especially political, Mr. Marriotti said, though he expressed frustration with the Bush Administration.

Christina Lunderberg, 21, a high school bandmate, said Mr. Loughner, as a saxophone player, "was really good and talented, and arrogant."

Alex Montanaro, who described himself as once having been one of "Jared's best friends" said his buddy was a good, smart kid who was close to his parents. "Throughout our time together all I saw was a normal, loving relationship," he said. 

But around the 10th grade, Mr. Loughner seemed to have "a mental downfall" following his break-up with a girlfriend, said Mr. Montanaro, who responded to questions via email. 

Mr. Loughner started acting strangely, Mr. Montanaro said, and "his friends changed from people like us to more, drug oriented people I suppose." He quit playing saxophone and was eventually ignored by his old friends. "Jared really became an outcast," he said.

Friends say by his junior year Mr. Loughner used drugs and his grades slumped. He didn't return for his senior year. 

In 2007, the year he would have graduated from high school, Mr. Loughner was arrested in Pima County and charged with possession of drugs and drug paraphernalia, according to court records. His case was dismissed.

Mr. Loughner went "through a tagging phase" in 2009, said Mr. Montanaro, painting graffiti, using phrases from literature. He also would sit in unlocked cars, he said, until the night he was chased off by one car's apparent owner.

One of Mr. Loughner's ambitions was to be a writer, said Mr. Montanaro, and he shared his stories with friends. One short story was about a "reporter during the end of the world speaking with an angel," he recalled.

Mr. Loughner later enrolled in classes at Pima Community College, where he became disruptive and unstable. 

Math instructor Ben McGahee said Mr. Loughner's frequent off-topic outbursts during an algebra course last summer frightened other students. On his first test, Mr. Loughner wrote "Mayhem Fest!!!" in large letters, Mr. McGahee said.

Mr. McGahee said he tried to remove Mr. Loughner from class on several occasions, but college officials didn't agree.

Pima College spokesman Paul Schwalbach said the school didn't notify law enforcement officials about Mr. Loughner because he didn't appear to be a threat. 

"He said things that were strange and he was a handful in class but he didn't threaten any students," Mr. Schwalbach said. Mr. Loughner withdrew in October after the school decided to require him to take a mental health evaluation, he said. 

In a series of videos posted on YouTube since the end of November, Mr. Loughner raged against the government and the Constitution and discussed "terrorism."

Zach Osler, a high school friend, also noted Mr. Loughner's slide. During his sophomore and junior years, Mr. Loughner became "progressively more weird," Mr. Osler said. He described an erratic young man who would talk excitedly about his theories of "conscious dreaming"—but would also fall into unnerving, long stupors of silence and stare fixedly at his buddies. 

Mr. Osler, 22 years old, also said Mr. Loughner told him he was unhappy at home. Mr. Loughner's parents have been unreachable since the shooting.

Their friendship faded, Mr. Osler said, and about two years ago Mr. Loughner sent a text message declaring it over. 

Police believe Mr. Loughner bought the gun used in the shootings at the Sportsman's Warehouse emporium north of Tucson where Mr. Osler works. Mr. Osler said he had no idea the weapon was purchased in his store until after the shooting, and that he hadn't been working on the day Mr. Loughner came in to buy it. 

Mr. Montanaro said he last spoke to Mr. Loughner last May, when his friend talked about hunting for a job and getting in shape. Mr. Loughner "really wanted to join the military" to help obtain better work skills, said Mr. Montanaro. "He worked out for months getting fit" but was eventually turned down, Mr. Montanaro adds. 

In one YouTube video Mr. Loughner posted online, he said he was an Army recruit at Military Entrance Processing Station in Phoenix. An Army spokesman confirmed that Mr. Loughner "attempted to enlist in the Army but was rejected for service."

A person familiar with the matter said he wasn't accepted because of a failed drug test.

Mr. Montanaro said his friend "was never really political," but "really tried to be philosophical." Mr. Loughner liked "contemplating the meaning of words and the origin of language," Mr. Montanaro said.

That interest might have triggered Mr. Loughner's first meeting with Ms. Giffords in 2007. Mr. Loughner said he asked the lawmaker, "How do you know words mean anything?" recalled Mr. Montanaro. He said Mr. Loughner was "aggravated" when Ms. Giffords, after pausing for a couple of seconds, "responded to him in Spanish and moved on with the meeting."

Mr. Montanaro recalled his friend developed "a hate for government and just how everything was systematic...He thought government controlled people too much."

"I really can't understand why Jared was so interested in Giffords," Mr. Montanaro said. "I imagine it was simply because she was the most accessible."

Officials said Saturday's shooting was captured on a surveillance video and showed Mr. Roll chatting with an aide to Ms. Giffords. Then Mr. Roll greeted Ms. Giffords as she was hit, according to people familiar with the matter.

Prominent political shootings involving members of Congress.

The 9mm bullet went through the left side of her head, from back to front. The shooter then opened fire on the crowd.

One bystander, Patricia Maisch, 61 years old, heard a pop and knew instantly it was gunfire. She said she flattened herself on the ground. A woman next to her was sheltering her daughter, and was shot in the back. "I thought, 'I wonder how it's going to feel. How bad it's going to be. Is it going to be in my head?'" she recalled.

Then the gunman was on the ground next to her, pinned by two men. She said she saw him reach into his pocket with his left hand and pull out a magazine clip. He dropped it. She heard someone shout to get the clip. "I was able to grab it before he could," she said.

Two men had pinned the gunman's upper body to the ground, but he was kicking wildly with his legs. Ms. Maisch knelt on his ankles. By that time, another man had wrested away the gun.

Corrections & Amplifications

Authorities allege Jared Loughner shot Rep. Gabrielle Giffords and 18 others, six fatally. An earlier version of this article incorrectly said he shot 20 people. One additional person was injured in the shooting but wasn't shot. 

—Evan Pérez, Alexandra Berzon, Ann Zimmerman and Daniel Gilbert contributed to this article.

 Write to  John R. Emshwiller at john.emshwiller@wsj.com, Devlin Barrett at devlin.barrett@wsj.com and Charles Forelle at charles.forelle@wsj.com 