ISLAMABAD, Pakistan—The United States called Saturday for the immediate release of an American diplomat who was arrested by Pakistani police for killing two armed men allegedly trying to rob him, saying his detention was unlawful under international law.

U.S. officials have been angered by the treatment of the official, who Pakistani authorities have named as  Raymond Davis, a security employee in the U.S. consulate in Lahore, the nation's second-largest city.

Mr. Davis shot dead two men on a motorcycle in Lahore Thursday after they allegedly tried to intercept his car. A third person, a bystander, was killed by a consular vehicle that was attempting to extricate Mr. Davis from the situation.

The U.S. embassy in Islamabad, the capital, said in a statement Saturday that Mr. Davis's subsequent arrest and detention by police in Lahore was in violation of a 1961 treaty, the Vienna Convention on Diplomatic Relations, which grants immunity from prosecution to diplomats serving overseas.

The Embassy said the U.S. official identified himself to police as a diplomat and repeatedly requested immunity.

The statement, which did not mention the U.S. official by name, said the diplomat acted in self-defense when confronted by two men who had criminal records. 

"The diplomat had every reason to believe that the armed men meant to harm him harm bodily," the statement said.

A spokesman for Pakistan's Foreign Ministry declined to comment on the matter while an investigation by the Punjab police is being conducted.

The incident is likely to exacerbate strains in the relationship between the U.S. and Pakistan.

Washington has pumped billions of dollars in civilian and military aid into Pakistan but remains deeply unpopular here for its campaign of unmanned Central Intelligence Agency drone strikes against Taliban fighters operating from Pakistani soil.

Officials in Punjab province, of which Lahore is the capital, were quick to say Mr. Davis should be tried under Pakistani law for alleged murder and possession of illegal firearms.

  Rana Sanaullah, the law minister of Punjab, said Friday it was still to be established whether the two men had intention to rob Mr. Davis, who he said should face trial in Pakistan. Those comments angered U.S. officials.

Small protests have broken out since Thursday calling for Mr. Davis to be tried in Pakistan. A section of Pakistan's media, which in the past has claimed U.S. aid workers are spies, also has called for a local trial.

The U.S. is frustrated its massive aid program has not improved its image among ordinary Pakistanis. Officials also are concerned over what they say is Pakistan's failure to clamp down on local militant Islamist groups that are viewed as a threat to U.S. security.

Pakistan could still release Mr. Davis under pressure from the U.S. once public anger dies down. Pakistani officials often criticize CIA drone strikes in public, although the government continues to give its tacit approval for them.

Mr. Davis has not been formally charged. Police are now investigating whether to formally lay charges of murder and the illegal possession of firearms.

The driver of the consular vehicle was not arrested. Pakistani officials have asked for that person, who has not been named, to be handed over by the consulate, but this has not happened. 

—Rehmat Mehsud contributed to this article.

 Write to  Tom Wright at tom.wright@wsj.com 