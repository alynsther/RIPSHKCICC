SAN'A, Yemenâ€”President Ali Abdullah Saleh rejected calls to step down Friday as hundreds of thousands of protesters, backed by army defectors, demonstrated in the Arab world's poorest country and security forces killed at least three people. 

Mr. Saleh's defiance came as Qatar announced it was pulling out of efforts to mediate a solution to the crisis, blaming Yemen's president for intransigence. Qatar is one of the members of the six-nation Gulf Cooperation Council, which is trying to persuade Mr. Saleh to honor a prior deal to step down. 

The council is fearful that Yemen's growing instability poses risks to the region and could embolden the powerful Yemeni affiliate of al Qaeda.

Addressing thousands of flag-waving supporters at a Friday prayer sermon in central San'a, Mr. Saleh described protesters as "saboteurs" and advised the political opposition who are seeking his ouster to use the ballot box and "stop playing with fire." 

"We will defend ourselves with all our forces and by all means," he said.

Minutes after his speech, security forces fired on a throng of protesters carrying out a burial ceremony in Ibb, a city south of San'a. A local pediatrician said three people were killed and 29 wounded in the clash, bringing the reported overall protest death toll in Yemen to more than 145 people, says Amnesty International.

Two miles north of where Mr. Saleh was addressing his supporters, an estimated half a million antigovernment protesters at San'a University staged their biggest pro-democracy rally since unrest broke out three months ago, filling a four-mile stretch of road with tents, banners and makeshift restaurants. 

Raising the specter of a broader conflict, they protested under the watchful eyes of soldiers and tanks sent by Maj. Gen. Ali Mohsen al-Ahmar, a former Saleh confidant who has since joined the opposition.

On Wednesday, Major Ali Mohsen's forces clashed in San'a with the elite Republican Guard, a force headed by the president's son. The four-hour gun battle left at least ten protesters and one soldier dead.

Track events day by day in the region.

The prolonged conflict is threatening to worsen Yemen's already crippled economy. Tribesmen blockading Yemen's oil- and gas-producing Marib province are creating a fuel crisis that is costing the country $3 million a day in blocked exports. 

Fuel shortages mean dry parts of the country have not received water shipments and even the capital San'a is grappling with power cuts that last up to 10 hours a day. Food prices have skyrocketed and cooking gas quadrupled in a country where some 40% of the population of 23 million people live on less than $2 a day and a third face chronic hunger. 

Oil and Minerals Minister Amir al-Aydarous warned on Thursday that Yemen was on the verge of an "economic disaster," 

"If the problem persists, the government will be unable to meet the minimum needs of the citizens. The situation will pose a catastrophe beyond imagination," Mr. Al-Ayradous said.

Qatar's withdrawal from the initiative is the latest chapter in weeks of steadily souring relations between Doha and San'a following a statement in March by Qatar's prime minister, Sheikh Hamad Bin Jassim Bin Jabr al-Thani, calling on Mr. Saleh to step down. The president responded by recalling Yemen's ambassador to Qatar and went on to accuse the oil-rich sheikhdom and its state-funded news channel, Al-Jazeera, of "funding chaos in Yemen, Egypt, Syria and throughout the Arab world." 

Yemen's official news agency Saba said Friday that Mr. Saleh's party accused Qatar of siding with the protesters and welcomed its withdrawal from the talks.

Despite Qatar's withdrawal, the other council members appear committed to push their Yemeni transition plan, which is backed by the U.S. and the European Union. Council secretary-general Abdullatif al-Zayani is due to arrive in San'a on Saturday to try to resuscitate it after Mr. Saleh suddenly refused to sign the deal last week.

The accord, which was accepted by the opposition, would see Mr. Saleh surrender power within 30 days of signing the deal in exchange for immunity for prosecution for himself and his relatives. It remained unclear whether Mr. Saleh was holding out in the hope of a better deal such as a guaranteed position in a future government or whether he intended to try and ride out the popular demands for his resignation until his term ends in 2013. He has only agreed to resign as leader of the ruling party.

Yemen's youthful protesters, meanwhile, have welcomed Qatar's withdrawal and are calling on the rest of the Gulf Cooperation Council to scrap the plan, which they say is merely letting the president buy more time. 

"We call on the rest of our brothers in the Gulf to ditch this plan, which is acting as a fig leaf for the regime and shielding it from prosecution despite all the killings" said Adel Al-Surabi, a member of the Civil Coalition of Revolutionary youth. 