CAIRO—Egyptians voted in overwhelming numbers to approve a set of constitutional amendments, setting the stage for Egypt's first truly contested parliamentary and presidential elections in decades.

Saturday's historic referendum on the amendments saw millions of enthusiastic Egyptians wait patiently for hours to cast ballots in what for almost everyone was a novelty—a vote in which the result wasn't effectively predetermined.

Track events day by day.

The largely peaceful and fraud-free vote was a marked contrast to past elections and a glimpse of how much has changed in Egypt in the weeks since President Hosni Mubarak stepped down amid widespread unrest, ending decades of single-party, autocratic rule.

 Yet Saturday's referendum also offered early clues into the rifts likely to shape Egyptian politics in the coming months and years. Many of the largely secular liberals who led the revolution that ousted Mr. Mubarak were opposed to the amendments, strongly suggesting the protest leaders have fallen out of sync with the vast majority of Egyptians.

Protest leaders criticized the amendments as part of a rushed and problematic timeline for establishing democracy; approving the changes started the clock on a race they said they are unprepared to run because they are still setting up parties.

Almost alone among the political groups in support of the amendments were the Muslim Brotherhood, an Islamist group outlawed under Mr. Mubarak, and the National Democratic Party, the former president's ruling party. Both hope to capitalize on their already strong organizations in summer elections for parliament, which will then be charged with writing an entirely new constitution.

But on Sunday, many Egyptians were still basking in the aftermath of what appeared to be the first relatively fair and violence-free election in their lifetimes. Jubilant residents of Cairo honked horns and set off fireworks after the results were announced. Journalists covering the announcement abandoned any pretenses of objectivity and yelled "Allahu Akbar!"—"God is Great!"—when the tallies were read out by officials.

"It's not important what the result is, it's important that it was fair," said Abdul Rahman Yusuf, a leader of the revolution.

Electoral officials said 77% of voters endorsed immediately approving the amendments, which include limiting the president to a pair of four-year terms and restoring the role of Egypt's relatively independent judiciary in overseeing elections. They were devised by a panel of judges and lawyers convened by the military shortly after Mr. Mubarak stepped down and the constitution—which concentrated power in the hands of the president alone—was suspended.

Roughly 18 million people, or 41% of eligible voters, voted, electoral officials said. In contrast, a mere six million people voted in parliamentary elections held only four months ago.

The prospect of a free and fair election in the Arab world's most populous country stood as a potential milestone in the region at a moment when democratic movements across the Middle East are faltering. There have been bloody crackdowns on pro-democracy protests in Bahrain and Yemen in recent days, and Libya appears to be in the opening stages of a full-out—and possibly protracted—civil war.

Despite the weekend's festive atmosphere in Egypt, there were problems during the vote, such as a lack of proper ballots in some places and sporadic violence. The worst incident was an attack by stone-throwing men that prevented opposition leader Mohammed ElBaradei from voting.

Observers attributed the problems to hasty preparations by the military, not malfeasance. But they also said the problems didn't inspire confidence that a similarly peaceful and clean parliamentary vote could be quickly organized.

"There were a lot of deficiencies and bad preparation" in the referendum, said Bahieddin Hassan, director of the Cairo Institute for Human Rights. He argued that a higher-stakes contest—such as a parliamentary election—could have been derailed by the lack of adequate preparation or visible security.

"If we were talking about a political election with many candidates, I think it would have been disaster," he said.

Saturday's referendum also hinted at how Egypt's one longstanding religious divide now appears to be playing out along political lines. Leaders of Egypt's Coptic Orthodox Church—whose adherents account for about 10% of the country's 80 million people—came out against the amendments. None of the amendments dealt with the religion, and Coptic leaders told followers their opposition was about stymieing the perceived electoral strength of Muslim Brotherhood.

"It was obvious that using religion in this conflict or this argument made it easier for the Egyptians to say 'yes,'" said Shadi Al Ghazali Harb, a member of the Revolutionary Youth Coalition. "So we are worried about how things will run especially in the campaigning because religion was intensely used. This is our main worry."

— contributed to this article.