TRIPOLI, Libya—Forces loyal to Col. Moammar Gadhafi put down protests in Tripoli and fought deadly battles for control of rebel territory, as opposition forces sought to advance toward the capital in their efforts to take down the Libyan leader.

In the western rebel-held city of al-Zawiya, a large force from a brigade led by one of Col. Gadhafi's sons led an attack on rebel forces, the Associated Press reported. The AP reported nearly 37 people killed in Libya Friday. 

A rebel army officer said rebel fighters had wrested control of the oil town of Ras Lanuf, west of Brega, a town rebels had seized and held in previous days. The rebel victory couldn't be independently confirmed, but if true would suggest the rebels were progressing westward.

The massive explosion at a rebel weapons depot on the outskirts of the rebel stronghold of Benghazi left at least 16 people dead on Friday night. It was unclear whether an accident or an attack caused the explosion.

The violence has left at least 1,000 dead since the rebellion began, according to conservative United Nations estimates. Rights groups have put the death toll as high as 6,000.

Internet service was blocked in much of the country, after being abrubtly disconnected—most likely by Libyan authorities, experts said—on Thursday afternoon. Tripoli was almost completely shut off.

Government minders in Tripoli tried to impose a lockdown on foreign journalists, saying they were targets of "al Qaeda gunmen."

In the capital, pro-Gadhafi forces displayed a firm grip. Government officials, showing apparent relief, suggested they had won the day's battle of the streets, and supporters of Col. Gadhafi staged noisy rallies throughout the city.

Amid a tense mood in and around the sprawling capital, some antigovernment protesters braved the threat of a heavy security presence—though in smaller, shorter protests than seen in the past two weeks.

In Tajura, a large industrial suburb that has been the bedrock of anti-Gadhafi sentiment since protests erupted in the capital in February, several hundred protesters denounced the 42-year rule of Col. Gadhafi and demanded that he step down. 

The government, however, asserted its dominance over much of Tajura by suppressing a street march less than an hour after it began.

After Friday prayers, in the courtyard of a mosque on Mizran Street, not far from the central Green Square where pro-Gadhafi rallies are held almost daily, worshippers started chanting anti-government slogans. 

In video footage given to The Wall Street Journal by a witness, dozens of worshipers could be seen coming out of the mosque, fanning out in its courtyard and chanting slogans while they raised their fists in the air.

"Libya is free, free; Gadhafi get out, out!" they chanted.

As they prepared to move beyond the mosque's fence and out into the street, a large group of Gadhafi supporters showed up and started chanting "the people want Gadhafi the colonel" and other slogans.

"Thugs," said someone in the anti-government crowd.

"Brothers, please do not commit suicide, sit in the courtyard and shut the gate," a man could be heard pleading with the protesters, as some started scurrying back into the mosque amid angry shouts.

Several hours later, the area was flooded with dozens of pro-Gadhafi militiamen on foot and in pickup trucks. Security forces in dark blue camouflage with bullet-proof vests and assault rifles led some bearded men out of the mosque. Two navy police pickups with detention boxes in the back were parked on the sidewalk. The hand of a detainee inside clasped the mesh covering the window of one of the boxes.

Militiamen were also out in force on major highways and roads leading to neighborhoods in Tripoli that have been scenes of protests and violence.

"To the masses of our city: who benefits from this destruction and mayhem?" read a billboard put up by the government in the neighborhood of Ain Zara.

By late afternoon many parts of the capital were in complete lockdown. Near Tajura, militiamen in civilian clothes and green fatigues stopped vehicles passing through the area, searching trunks and checking the drivers' identification.

Roads leading into Tajura, 15 miles from the capital, were blocked with tanks and dozens of armed men. On a road skirting past Tajura and going to the seaside boulevard, antigovernment slogans could still be seen on the walls.

"Down with Fateh Forever," read one, referring to Gadhafi's 1969 military coup known as the "Fateh Revolution."

In the 11th July neighborhood, which had witnessed recent unrest, the words "I am Free!" were scrawled in English and in blue spray on a wall inside one of the alleyways.

Tajura has been the site of much of regime's crackdown over the past two Fridays, but residents throughout the week had been planning to launch fresh demonstrations.

Track events day by day.

See photos from protests from Algeria to Yemen.

A look at the economic and political status of selected countries facing unrest in North Africa and the Middle East.

After the end of traditional noon prayers, unarmed protesters fanned out from the city's oldest mosque, Murad Agha Mosque, and chanted slogans that have become a staple of the Arab protest movement—the people want the regime to fall. 

The crowd of several hundred appeared smaller than the previous week, and residents said that was due in part to the intense wave of arrests by security officials each night for the past 10 days. Security forces who had massed several hundred yards away from the mosque allowed the group to march for only a brief time before speeding down the street and firing rubber bullets and tear gas into the crowd to make it disperse. 

The pops of the tear gas cannisters scared the crowd, which scattered, but the security forces seemed to refrain from using live ammunition.

Tajura's main street cleared of foot traffic within minutes and members of the capital's elite security brigade as well as riot police locked down the area from visitors—except for a band of 25 teenage boys wearing green headscarves and carrying pictures of Col. Gadhafi, who were allowed to march in front of the mosque for at least 20 minutes.

In Algeria Square, the site of one of the city's main mosques, pro-government demonstrators appeared to have free rein to gather. Riot police watched while the group chanted and carloads of people waving green flags honked horns and declared their love for Col. Gadhafi. "He is our George Washington. He's the one who made Libya great," said one middle-aged man.

Amid the noise at the square a middle-aged man carrying a bag of fresh bread walked through a group of chanting government supporters and whispered in English: "Don't believe what they are saying. They are here because they are paid. They are liars," before melting down a side street.

By late afternoon, riot police with armored trucks had cordoned off the area.

During the day, state television aired patriotic songs and religious sermons that referred to antigovernment protesters and army rebels as "traitors" and "collaborators with the West and the Jews."

One channel aired video footage showing two of the three Dutch marines who the Dutch Defense Ministry says were captured on Sunday after a botched rescue mission. The state channel said the marines were on an assault helicopter that entered Libya with hostile intent.

The images that were aired on state TV showed a male and female Dutch marine sipping from cans of soda while being interrogated by a man sitting behind a desk and pouring over documents. Other footage showed a helicopter and its mounted machine gun, and displayed ammunition, radio equipment, a camera, dollar bills and maps.

—Charles Levinson in Benghazi, Libya and Michael Hickins in New York contributed to this article.

 Write to  Margaret Coker at margaret.coker@wsj.com and Sam Dagher at sam.dagher@wsj.com 