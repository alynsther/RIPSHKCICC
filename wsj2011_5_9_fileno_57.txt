KABUL—Taliban fighters flooded southern Afghanistan's main city over the weekend, seizing key buildings to stage attacks on government agencies, in a two-day battle that brought Kandahar to its knees and showcased the insurgency's strength.

Fighting began Saturday at noon as up to 60 insurgents armed with suicide vests, vehicles and rickshaws crammed with explosives attacked the Kandahar intelligence service and police headquarters, the provincial governor's compound, various police stations and coalition infrastructure, according to U.S. and Afghan officials. 

Holed up in several buildings in central Kandahar, including the electric plant near the governor's office, a three-story shopping mall, a school and the Kandahar Hotel, the insurgents traded gunfire and rocket-propelled grenades with Afghan security forces well into Sunday night. A suicide bombing at 8 p.m. marked the end of the attack, 32 hours after it began, authorities said.

"Helicopters are circling the area and have fired on buildings with Taliban fighters" inside, said Janan, a Kandahar resident living near the intelligence service headquarters, under attack Sunday night. "Many people who live around the area have tried to evacuate their houses. Everyone is fearful."

Residents in other parts of Kandahar said they were shut indoors, with coalition and Afghan forces patrolling heavily and preventing many Afghans from leaving their homes. "All the shops are closed, and there's no traffic in the streets," said Kandahar teacher Ghulam Shafi. "We are concerned that the government is not able to stop such attacks."

The Taliban's ability to mount such a massive operation in Afghanistan's second-largest metropolis, sustaining two days of street battles, punctured the U.S. military's narrative of progress in pacifying Kandahar, the focus of President Barack Obama's military surge and the Taliban movement's birthplace.

The weekend mayhem in Kandahar also cast doubt on the U.S.-led coalition's plans to transfer security duties to Afghan forces starting this summer, before most coalition forces withdraw by the end of 2014.

Accounts of the fighting's toll differed dramatically. According to Zalmai Ayubi, the Kandahar provincial government spokesman, 22 people were killed, including 18 insurgents, three Afghan security personnel and a civilian. The Taliban claimed they killed 116 Afghan troops and public servants. The insurgents usually exaggerate the toll of their attacks, while Afghan government officials don't always report the full casualties.

A doctor at the city's main government hospital, Mirwais, said Sunday that he had seen eight police and civilian fatalities, and many more people with critical injuries.

The assault on Kandahar began a day after the Taliban released a statement condemning the killing of Osama bin Laden by U.S. forces in Pakistan, and vowing that the death of al Qaeda's founder "will give a new impetus to the current jihad against the invaders." But Taliban spokesman Qari Yusuf Ahmadi said the operation wasn't a reprisal for bin Laden's killing but marked instead the beginning of the insurgents' spring offensive, dubbed Badar and announced late last month.

"This is a message that we can carry out huge attacks even in the heart of Kandahar city and bring high-profile government installations under attack for as long as we want," he said. "The operations are going well and the [government] gangsters of Kandahar can't control our fighters."

He added that more than 100 insurgents staged the attacks, many of them Taliban fighters set free in a spectacular prison break from Kandahar's Sarpoza prison last month. The Taliban burrowed a tunnel to the high-security prison from a safe house a kilometer away, ferrying out some 500 militants, many of them seasoned commanders and shadow governors. The Afghan government has since detained the prison's chief warden and other law-enforcement officials on suspicion of complicity in the jailbreak.

Mr. Ayubi, the Kandahar government spokesman, conceded the Taliban's widespread reach and increasingly sophisticated tactics. "We have no doubt that the insurgency has strong hands behind it. As much as we change and improve our security tactics, they are able to do the same," My. Ayubi said.

U.S.-led coalition officials, however, provided a more positive assessment of the weekend's violence. "This clearly was intended to be a spring-offensive spectacular attack, which was thwarted by Afghan National Security Forces," said U.S. Marine Corps Maj. Gen. James Laster, the coalition's deputy chief of staff for joint operations, in a statement.

U.S. Army Lt. Col. Webster Wright, the spokesman for the coalition's Regional Command-South, based in Kandahar, said as many as four international troops were wounded in the city over the weekend, none critically. He didn't provide the nationalities, but U.S. forces dominate Kandahar's military bases.

—Ghousuddin Frotan and Habib Khan Totakhil contributed to this article.